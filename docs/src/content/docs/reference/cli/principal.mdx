---
title: principal
description: Manage device identities and service principals.
---

Principals represent devices or credentials that can access zopp. Each principal has its own cryptographic keypairs.

## Commands

| Command | Description |
|---------|-------------|
| `list` | List all local principals |
| `current` | Show the current principal |
| `create` | Create a new principal |
| `use` | Switch to a different principal |
| `rename` | Rename a principal |
| `delete` | Delete a principal |
| `service-list` | List service principals in a workspace |
| `workspace-remove` | Remove a principal from a workspace |
| `revoke-all` | Revoke all permissions for a principal |

---

## principal list

List all principals stored locally.

### Usage

```bash
zopp principal list
```

### Example

```bash
zopp principal list

# Output:
# Principals:
# * alice-macbook (prn_a1b2c3d4...)  # Current
#   alice-desktop (prn_e5f67890...)
#   github-ci (prn_12345678...)
```

---

## principal current

Show the name of the currently active principal.

### Usage

```bash
zopp principal current
```

### Example

```bash
zopp principal current

# Output:
# alice-macbook
```

---

## principal create

Create a new principal.

### Usage

```bash
zopp principal create <NAME> [--service] [-w <WORKSPACE>]
```

### Arguments

| Argument | Description |
|----------|-------------|
| `NAME` | Principal name |

### Options

| Option | Description |
|--------|-------------|
| `--service` | Create as a service principal (no user) |
| `-w, --workspace <NAME>` | Workspace for service principal (required with `--service`) |

### Examples

#### Device principal

Create a principal for another device. It automatically gets access to all your workspaces:

```bash
zopp principal create work-desktop

# Output:
# ✓ Principal 'work-desktop' created
# ID: prn_a1b2c3d4-e5f6-7890-abcd-ef1234567890
```

#### Service principal

Create a principal for automation (CI/CD, operators):

```bash
zopp principal create github-actions --service -w myworkspace

# Output:
# ✓ Service principal 'github-actions' created
# ID: prn_12345678-1234-1234-1234-123456789012
```

---

## principal use

Switch to a different principal.

### Usage

```bash
zopp principal use <NAME>
```

### Arguments

| Argument | Description |
|----------|-------------|
| `NAME` | Principal name to switch to |

### Example

```bash
zopp principal use work-desktop

# Output:
# ✓ Now using principal 'work-desktop'
```

---

## principal rename

Rename a principal locally and on the server.

### Usage

```bash
zopp principal rename <NAME> <NEW_NAME>
```

### Arguments

| Argument | Description |
|----------|-------------|
| `NAME` | Current principal name |
| `NEW_NAME` | New principal name |

### Example

```bash
zopp principal rename old-laptop new-laptop

# Output:
# ✓ Principal renamed to 'new-laptop'
```

---

## principal delete

Delete a principal.

### Usage

```bash
zopp principal delete <NAME>
```

### Arguments

| Argument | Description |
|----------|-------------|
| `NAME` | Principal name to delete |

### Example

```bash
zopp principal delete old-laptop

# Output:
# ✓ Principal 'old-laptop' deleted
```

:::caution
You cannot delete your only principal or the currently active principal.
:::

---

## principal service-list

List service principals in a workspace.

### Usage

```bash
zopp principal service-list -w <WORKSPACE>
```

### Options

| Option | Description |
|--------|-------------|
| `-w, --workspace <NAME>` | Workspace name |

### Example

```bash
zopp principal service-list -w acme-corp

# Output:
# Service Principals:
#   github-actions (prn_12345678...)  admin   2025-01-15
#   k8s-operator (prn_abcdef12...)    read    2025-01-10
```

---

## principal workspace-remove

Remove a principal from a workspace, revoking all its access.

### Usage

```bash
zopp principal workspace-remove -w <WORKSPACE> --principal <ID>
```

### Options

| Option | Description |
|--------|-------------|
| `-w, --workspace <NAME>` | Workspace name |
| `--principal <ID>` | Principal ID (UUID) |

### Example

```bash
zopp principal workspace-remove -w acme-corp --principal prn_12345678...

# Output:
# ✓ Principal removed from workspace
```

---

## principal revoke-all

Revoke all permissions for a principal in a workspace, but keep it as a member.

### Usage

```bash
zopp principal revoke-all -w <WORKSPACE> --principal <ID>
```

### Options

| Option | Description |
|--------|-------------|
| `-w, --workspace <NAME>` | Workspace name |
| `--principal <ID>` | Principal ID (UUID) |

### Example

```bash
zopp principal revoke-all -w acme-corp --principal prn_12345678...

# Output:
# ✓ Revoked 5 permissions
```

## Principal Types

### Device Principals

- Associated with a user (email)
- Created with `zopp join` or `zopp principal create`
- Automatically get access to all user's workspaces
- Stored in `~/.zopp/config.json`

### Service Principals

- Not associated with a user
- Created with `--service` flag
- Must be explicitly granted workspace access
- Used for automation (CI/CD, Kubernetes operators)

## Notes

- Each principal has Ed25519 (signing) and X25519 (encryption) keypairs
- Private keys never leave your machine
- Service principals should be given minimal permissions
- Principal credentials are in `~/.zopp/config.json`—keep this file secure
