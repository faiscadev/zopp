---
title: secret
description: Store, retrieve, and manage secrets.
---

The `secret` command manages encrypted secrets within an environment.

## Commands

| Command | Description |
|---------|-------------|
| `set` | Create or update a secret |
| `get` | Retrieve and decrypt a secret |
| `list` | List all secrets in an environment |
| `delete` | Delete a secret |
| `export` | Export secrets to `.env` format |
| `import` | Import secrets from `.env` format |

---

## secret set

Create or update a secret. The value is encrypted client-side before being sent to the server.

### Usage

```bash
zopp secret set <KEY> <VALUE> [-w <WORKSPACE>] [-p <PROJECT>] [-e <ENVIRONMENT>]
```

### Arguments

| Argument | Description |
|----------|-------------|
| `KEY` | Secret key (e.g., `DATABASE_URL`) |
| `VALUE` | Secret value (plaintext) |

### Options

| Option | Description |
|--------|-------------|
| `-w, --workspace <NAME>` | Workspace name (optional if in `zopp.toml`) |
| `-p, --project <NAME>` | Project name (optional if in `zopp.toml`) |
| `-e, --environment <NAME>` | Environment name (optional if in `zopp.toml`) |

### Example

```bash
zopp secret set DATABASE_URL "postgresql://user:pass@localhost/db"

# Output:
# ✓ Secret 'DATABASE_URL' set
```

### What Happens

1. Unwraps workspace KEK using your X25519 private key
2. Unwraps environment DEK using the KEK
3. Encrypts the value using XChaCha20-Poly1305 AEAD
4. Sends only the ciphertext and nonce to the server

---

## secret get

Retrieve and decrypt a secret.

### Usage

```bash
zopp secret get <KEY> [-w <WORKSPACE>] [-p <PROJECT>] [-e <ENVIRONMENT>]
```

### Arguments

| Argument | Description |
|----------|-------------|
| `KEY` | Secret key to retrieve |

### Options

| Option | Description |
|--------|-------------|
| `-w, --workspace <NAME>` | Workspace name (optional if in `zopp.toml`) |
| `-p, --project <NAME>` | Project name (optional if in `zopp.toml`) |
| `-e, --environment <NAME>` | Environment name (optional if in `zopp.toml`) |

### Example

```bash
zopp secret get DATABASE_URL

# Output:
# postgresql://user:pass@localhost/db
```

The value is printed to stdout with no additional formatting, making it easy to use in scripts:

```bash
export DB_URL=$(zopp secret get DATABASE_URL)
```

---

## secret list

List all secret keys in an environment.

### Usage

```bash
zopp secret list [-w <WORKSPACE>] [-p <PROJECT>] [-e <ENVIRONMENT>]
```

### Options

| Option | Description |
|--------|-------------|
| `-w, --workspace <NAME>` | Workspace name (optional if in `zopp.toml`) |
| `-p, --project <NAME>` | Project name (optional if in `zopp.toml`) |
| `-e, --environment <NAME>` | Environment name (optional if in `zopp.toml`) |

### Example

```bash
zopp secret list

# Output:
# Secrets:
#   API_KEY
#   DATABASE_URL
#   REDIS_URL
```

:::note
This lists only the keys, not the values. Use `secret get` or `secret export` to retrieve values.
:::

---

## secret delete

Delete a secret.

### Usage

```bash
zopp secret delete <KEY> [-w <WORKSPACE>] [-p <PROJECT>] [-e <ENVIRONMENT>]
```

### Arguments

| Argument | Description |
|----------|-------------|
| `KEY` | Secret key to delete |

### Options

| Option | Description |
|--------|-------------|
| `-w, --workspace <NAME>` | Workspace name (optional if in `zopp.toml`) |
| `-p, --project <NAME>` | Project name (optional if in `zopp.toml`) |
| `-e, --environment <NAME>` | Environment name (optional if in `zopp.toml`) |

### Example

```bash
zopp secret delete OLD_API_KEY

# Output:
# ✓ Secret 'OLD_API_KEY' deleted
```

---

## secret export

Export all secrets to `.env` format.

### Usage

```bash
zopp secret export [-w <WORKSPACE>] [-p <PROJECT>] [-e <ENVIRONMENT>] [-o <FILE>]
```

### Options

| Option | Description |
|--------|-------------|
| `-w, --workspace <NAME>` | Workspace name (optional if in `zopp.toml`) |
| `-p, --project <NAME>` | Project name (optional if in `zopp.toml`) |
| `-e, --environment <NAME>` | Environment name (optional if in `zopp.toml`) |
| `-o, --output <FILE>` | Output file (defaults to stdout) |

### Example

```bash
# Export to file
zopp secret export -o .env

# Output:
# ✓ Exported 5 secrets to .env

# Export to stdout
zopp secret export
# API_KEY=sk_live_abc123
# DATABASE_URL=postgresql://...
```

The output is sorted alphabetically by key.

---

## secret import

Import secrets from `.env` format.

### Usage

```bash
zopp secret import [-w <WORKSPACE>] [-p <PROJECT>] [-e <ENVIRONMENT>] [-i <FILE>]
```

### Options

| Option | Description |
|--------|-------------|
| `-w, --workspace <NAME>` | Workspace name (optional if in `zopp.toml`) |
| `-p, --project <NAME>` | Project name (optional if in `zopp.toml`) |
| `-e, --environment <NAME>` | Environment name (optional if in `zopp.toml`) |
| `-i, --input <FILE>` | Input file (defaults to stdin) |

### Example

```bash
# Import from file
zopp secret import -i .env

# Output:
# ✓ Imported 5 secrets

# Import from stdin
cat .env | zopp secret import
```

### Supported Format

```bash
# Comments are skipped
KEY=value
QUOTED="value with spaces"
SINGLE='also works'
```

### Behavior

- Existing keys are updated with new values
- New keys are created
- Keys not in the file are preserved (import doesn't delete)

## Notes

- Secret keys should be uppercase with underscores (convention)
- Values can contain any characters; special characters are preserved
- Maximum key length: 256 characters
- Maximum value length: 64 KB
