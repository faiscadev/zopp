---
title: environment
description: Manage environments within a project.
---

Environments contain secrets for a specific deployment context (development, staging, production, etc.).

## Commands

| Command | Description |
|---------|-------------|
| `list` | List environments in a project |
| `create` | Create a new environment |
| `get` | Get environment details |
| `delete` | Delete an environment |

---

## environment list

List all environments in a project.

### Usage

```bash
zopp environment list [-w <WORKSPACE>] [-p <PROJECT>]
```

### Options

| Option | Description |
|--------|-------------|
| `-w, --workspace <NAME>` | Workspace name (optional if in `zopp.toml`) |
| `-p, --project <NAME>` | Project name (optional if in `zopp.toml`) |

### Example

```bash
zopp environment list -w acme-corp -p api-backend

# Output:
# Environments:
#   development
#   staging
#   production
```

---

## environment create

Create a new environment. This generates a new Data Encryption Key (DEK) wrapped with the workspace KEK.

### Usage

```bash
zopp environment create <NAME> [-w <WORKSPACE>] [-p <PROJECT>]
```

### Arguments

| Argument | Description |
|----------|-------------|
| `NAME` | Environment name |

### Options

| Option | Description |
|--------|-------------|
| `-w, --workspace <NAME>` | Workspace name (optional if in `zopp.toml`) |
| `-p, --project <NAME>` | Project name (optional if in `zopp.toml`) |

### Example

```bash
zopp environment create production -w acme-corp -p api-backend

# Output:
# ✓ Environment 'production' created
# ID: env_a1b2c3d4-e5f6-7890-abcd-ef1234567890
```

### What Happens

1. Unwraps the workspace KEK using your X25519 private key
2. Generates a random 32-byte DEK
3. Wraps the DEK with the KEK using XChaCha20-Poly1305
4. Stores the wrapped DEK on the server
5. Server never sees the plaintext DEK

---

## environment get

Get details about an environment.

### Usage

```bash
zopp environment get <NAME> [-w <WORKSPACE>] [-p <PROJECT>]
```

### Arguments

| Argument | Description |
|----------|-------------|
| `NAME` | Environment name |

### Options

| Option | Description |
|--------|-------------|
| `-w, --workspace <NAME>` | Workspace name (optional if in `zopp.toml`) |
| `-p, --project <NAME>` | Project name (optional if in `zopp.toml`) |

### Example

```bash
zopp environment get production -w acme-corp -p api-backend

# Output:
# Environment: production
# ID: env_a1b2c3d4-e5f6-7890-abcd-ef1234567890
# Project: prj_...
# Created: 2025-01-15 10:30:00 UTC
# Updated: 2025-01-15 10:30:00 UTC
```

---

## environment delete

Delete an environment and all its secrets.

### Usage

```bash
zopp environment delete <NAME> [-w <WORKSPACE>] [-p <PROJECT>]
```

### Arguments

| Argument | Description |
|----------|-------------|
| `NAME` | Environment name |

### Options

| Option | Description |
|--------|-------------|
| `-w, --workspace <NAME>` | Workspace name (optional if in `zopp.toml`) |
| `-p, --project <NAME>` | Project name (optional if in `zopp.toml`) |

### Example

```bash
zopp environment delete staging -w acme-corp -p api-backend

# Output:
# ✓ Environment 'staging' deleted
```

:::caution
Deleting an environment removes all secrets within it. This action cannot be undone.
:::

## Using zopp.toml

With a `zopp.toml` file, you can omit the `-w` and `-p` flags:

```toml
# zopp.toml
[defaults]
workspace = "acme-corp"
project = "api-backend"
environment = "development"
```

```bash
# These are equivalent:
zopp environment create staging -w acme-corp -p api-backend
zopp environment create staging

# Override just one option
zopp environment create staging -p another-project
```

## Notes

- Environment names must be unique within a project
- Each environment has its own encryption key (DEK)
- Environments inherit permissions from project/workspace unless overridden
- Common environment names: `development`, `staging`, `production`, `testing`
