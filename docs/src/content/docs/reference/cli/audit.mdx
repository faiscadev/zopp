---
title: audit
description: View audit logs for workspace activity.
---

The `audit` command views audit logs that track all activity in a workspace.

## Commands

| Command | Description |
|---------|-------------|
| `list` | List audit log entries |
| `get` | Get details of a specific entry |
| `count` | Count audit log entries |

---

## audit list

List audit log entries with optional filtering.

### Usage

```bash
zopp audit list -w <WORKSPACE> [--action <ACTION>] [--result <RESULT>] [--limit <N>]
```

### Options

| Option | Description |
|--------|-------------|
| `-w, --workspace <NAME>` | Workspace name (required) |
| `--action <ACTION>` | Filter by action (e.g., `secret.create`) |
| `--result <RESULT>` | Filter by result (`success`, `permission_denied`, `not_found`, `error`) |
| `--limit <N>` | Maximum entries to return (default: 50) |

### Example

```bash
zopp audit list -w acme-corp --limit 10

# Output:
# Audit Log:
#   2025-01-15 10:30:00  secret.create     success    DATABASE_URL
#   2025-01-15 10:29:45  secret.get        success    API_KEY
#   2025-01-15 10:29:30  environment.create success   production
#   2025-01-15 10:25:00  secret.get        permission_denied  ADMIN_KEY
```

### Filter by action

```bash
zopp audit list -w acme-corp --action secret.create

# Shows only secret creation events
```

### Filter by result

```bash
zopp audit list -w acme-corp --result permission_denied

# Shows only denied access attempts
```

---

## audit get

Get detailed information about a specific audit log entry.

### Usage

```bash
zopp audit get -w <WORKSPACE> <ID>
```

### Arguments

| Argument | Description |
|----------|-------------|
| `ID` | Audit log entry ID (UUID) |

### Options

| Option | Description |
|--------|-------------|
| `-w, --workspace <NAME>` | Workspace name (required) |

### Example

```bash
zopp audit get -w acme-corp aud_12345678-1234-1234-1234-123456789012

# Output:
# Audit Entry: aud_12345678-1234-1234-1234-123456789012
#
# Timestamp:     2025-01-15 10:30:00 UTC
# Action:        secret.create
# Result:        success
#
# Principal:     prn_a1b2c3d4... (alice-macbook)
# User:          alice@company.com
#
# Resource:
#   Type:        secret
#   Key:         DATABASE_URL
#   Workspace:   acme-corp
#   Project:     api-backend
#   Environment: production
#
# Client IP:     192.168.1.100
```

---

## audit count

Count audit log entries matching filters.

### Usage

```bash
zopp audit count -w <WORKSPACE> [--action <ACTION>] [--result <RESULT>]
```

### Options

| Option | Description |
|--------|-------------|
| `-w, --workspace <NAME>` | Workspace name (required) |
| `--action <ACTION>` | Filter by action (optional) |
| `--result <RESULT>` | Filter by result (optional) |

### Example

```bash
zopp audit count -w acme-corp

# Output:
# Total entries: 1,234

zopp audit count -w acme-corp --result permission_denied

# Output:
# Matching entries: 15
```

---

## Audit Actions

Common actions tracked in the audit log:

| Action | Description |
|--------|-------------|
| `user.join` | User joined the server |
| `workspace.create` | Workspace created |
| `project.create` | Project created |
| `project.delete` | Project deleted |
| `environment.create` | Environment created |
| `environment.delete` | Environment deleted |
| `secret.create` | Secret created |
| `secret.update` | Secret updated |
| `secret.get` | Secret retrieved |
| `secret.delete` | Secret deleted |
| `secret.list` | Secrets listed |
| `secret.export` | Secrets exported |
| `invite.create` | Workspace invite created |
| `invite.consume` | Workspace invite accepted |
| `permission.set` | Permission granted |
| `permission.remove` | Permission revoked |

---

## Result Codes

| Result | Description |
|--------|-------------|
| `success` | Operation completed successfully |
| `permission_denied` | Principal lacks required permission |
| `not_found` | Resource not found |
| `error` | Server error occurred |

---

## Use Cases

### Security monitoring

Review access patterns and failed attempts:

```bash
# Check for permission denials
zopp audit list -w acme-corp --result permission_denied --limit 100
```

### Compliance

Export audit logs for compliance review:

```bash
# Get recent activity
zopp audit list -w acme-corp --limit 1000 > audit-export.txt
```

### Incident investigation

Trace activity around a specific time:

```bash
# Find all secret access
zopp audit list -w acme-corp --action secret.get --limit 100
```

---

## Notes

- Audit logs are stored on the server
- Only workspace admins can view audit logs
- Logs include both successful operations and failures
- Client IP is logged when available
- Logs do not contain secret values (only key names)
