"use strict";(globalThis.webpackChunkzopp_docs=globalThis.webpackChunkzopp_docs||[]).push([[7785],{8453(e,n,r){r.d(n,{R:()=>t,x:()=>o});var i=r(6540);const s={},c=i.createContext(s);function t(e){const n=i.useContext(c);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(c.Provider,{value:n},e.children)}},8575(e,n,r){r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"guides/core-concepts","title":"Core Concepts","description":"Understand the fundamental concepts of zopp - workspaces, projects, environments, and the key hierarchy.","source":"@site/docs/guides/core-concepts.md","sourceDirName":"guides","slug":"/guides/core-concepts","permalink":"/zopp/guides/core-concepts","draft":false,"unlisted":false,"editUrl":"https://github.com/faiscadev/zopp/tree/main/docs/docs/guides/core-concepts.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Core Concepts","description":"Understand the fundamental concepts of zopp - workspaces, projects, environments, and the key hierarchy."},"sidebar":"docs","previous":{"title":"Guides","permalink":"/zopp/guides/"},"next":{"title":"Team Collaboration","permalink":"/zopp/guides/team-collaboration"}}');var s=r(4848),c=r(8453);const t={sidebar_position:2,title:"Core Concepts",description:"Understand the fundamental concepts of zopp - workspaces, projects, environments, and the key hierarchy."},o="Core Concepts",l={},a=[{value:"The Hierarchy",id:"the-hierarchy",level:2},{value:"Workspaces",id:"workspaces",level:3},{value:"Projects",id:"projects",level:3},{value:"Environments",id:"environments",level:3},{value:"Key Hierarchy",id:"key-hierarchy",level:2},{value:"Principals",id:"principals",level:3},{value:"Workspace KEK",id:"workspace-kek",level:3},{value:"Environment DEK",id:"environment-dek",level:3},{value:"Secret Encryption",id:"secret-encryption",level:3},{value:"Project Configuration",id:"project-configuration",level:2},{value:"Users vs Principals",id:"users-vs-principals",level:2},{value:"RBAC Permissions",id:"rbac-permissions",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"core-concepts",children:"Core Concepts"})}),"\n",(0,s.jsx)(n.p,{children:"This guide explains the core concepts that make zopp work. Understanding these will help you organize your secrets effectively and take full advantage of zopp's security model."}),"\n",(0,s.jsx)(n.h2,{id:"the-hierarchy",children:"The Hierarchy"}),"\n",(0,s.jsx)(n.p,{children:"zopp organizes secrets in a three-level hierarchy:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Workspace\n \u2514\u2500\u2500 Project\n      \u2514\u2500\u2500 Environment\n           \u2514\u2500\u2500 Secrets\n"})}),"\n",(0,s.jsx)(n.h3,{id:"workspaces",children:"Workspaces"}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.strong,{children:"workspace"})," is the top-level container, typically representing your organization or team."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"zopp workspace create acme-corp\n"})}),"\n",(0,s.jsx)(n.p,{children:"Workspaces:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Have their own Key Encryption Key (KEK)"}),"\n",(0,s.jsx)(n.li,{children:"Can contain multiple projects"}),"\n",(0,s.jsx)(n.li,{children:"Are the unit of access control for inviting team members"}),"\n",(0,s.jsx)(n.li,{children:"Are isolated from other workspaces"}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"Most teams need only one workspace. Create additional workspaces if you have completely separate teams or organizations that should never share secrets."})}),"\n",(0,s.jsx)(n.h3,{id:"projects",children:"Projects"}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.strong,{children:"project"})," groups related environments, typically representing an application or service."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"zopp project create api-backend -w acme-corp\nzopp project create web-frontend -w acme-corp\nzopp project create mobile-app -w acme-corp\n"})}),"\n",(0,s.jsx)(n.p,{children:"Projects:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Belong to exactly one workspace"}),"\n",(0,s.jsx)(n.li,{children:"Can have different permission sets than the workspace"}),"\n",(0,s.jsx)(n.li,{children:"Help organize secrets by application"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"environments",children:"Environments"}),"\n",(0,s.jsxs)(n.p,{children:["An ",(0,s.jsx)(n.strong,{children:"environment"})," contains the actual secrets, representing a deployment context."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"zopp environment create development -w acme-corp -p api-backend\nzopp environment create staging -w acme-corp -p api-backend\nzopp environment create production -w acme-corp -p api-backend\n"})}),"\n",(0,s.jsx)(n.p,{children:"Environments:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Have their own Data Encryption Key (DEK)"}),"\n",(0,s.jsx)(n.li,{children:"Contain the actual secret key-value pairs"}),"\n",(0,s.jsx)(n.li,{children:"Enable separate permissions per environment (e.g., only admins can read production)"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"key-hierarchy",children:"Key Hierarchy"}),"\n",(0,s.jsx)(n.p,{children:"zopp uses a hierarchical key structure for zero-knowledge encryption:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"User\n \u2514\u2500\u2500 Principal (your device)\n      \u251c\u2500\u2500 Ed25519 keypair (authentication)\n      \u2514\u2500\u2500 X25519 keypair (encryption)\n           \u2514\u2500\u2500 Workspace\n                \u2514\u2500\u2500 KEK (wrapped per-principal)\n                     \u2514\u2500\u2500 Environment\n                          \u2514\u2500\u2500 DEK (wrapped with KEK)\n                               \u2514\u2500\u2500 Secrets (encrypted with DEK)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"principals",children:"Principals"}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.strong,{children:"principal"})," is a device or credential that can access zopp. When you run ",(0,s.jsx)(n.code,{children:"zopp join"}),", you create a principal."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Each principal has its own Ed25519 (signing) and X25519 (encryption) keypairs"}),"\n",(0,s.jsxs)(n.li,{children:["Principals are stored in ",(0,s.jsx)(n.code,{children:"~/.zopp/config.json"})]}),"\n",(0,s.jsx)(n.li,{children:"You can have multiple principals on the same machine"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# List your principals\nzopp principal list\n\n# Create a new principal for another device\nzopp principal create work-laptop\n\n# Switch between principals\nzopp principal use work-laptop\n"})}),"\n",(0,s.jsx)(n.h3,{id:"workspace-kek",children:"Workspace KEK"}),"\n",(0,s.jsx)(n.p,{children:"Each workspace has a Key Encryption Key (KEK):"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Generated when the workspace is created"}),"\n",(0,s.jsx)(n.li,{children:"32 bytes, randomly generated"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Wrapped"})," (encrypted) separately for each principal using X25519 ECDH"]}),"\n",(0,s.jsx)(n.li,{children:"The server stores only the wrapped KEK, never the plaintext"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"When you invite someone to a workspace:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Your client unwraps your copy of the KEK"}),"\n",(0,s.jsx)(n.li,{children:"Your client wraps the KEK for the invitee's public key"}),"\n",(0,s.jsx)(n.li,{children:"The server stores the newly wrapped KEK"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"environment-dek",children:"Environment DEK"}),"\n",(0,s.jsx)(n.p,{children:"Each environment has a Data Encryption Key (DEK):"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Generated when the environment is created"}),"\n",(0,s.jsx)(n.li,{children:"32 bytes, randomly generated"}),"\n",(0,s.jsx)(n.li,{children:"Wrapped with the workspace KEK"}),"\n",(0,s.jsx)(n.li,{children:"Used to encrypt/decrypt all secrets in that environment"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"secret-encryption",children:"Secret Encryption"}),"\n",(0,s.jsx)(n.p,{children:"Secrets are encrypted using XChaCha20-Poly1305 AEAD:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Each secret has its own random nonce"}),"\n",(0,s.jsx)(n.li,{children:"Additional Authenticated Data (AAD) includes workspace, project, environment, and key name"}),"\n",(0,s.jsx)(n.li,{children:"Only the ciphertext and nonce are stored on the server"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"project-configuration",children:"Project Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Instead of typing ",(0,s.jsx)(n.code,{children:"-w"}),", ",(0,s.jsx)(n.code,{children:"-p"}),", ",(0,s.jsx)(n.code,{children:"-e"})," flags every time, create a ",(0,s.jsx)(n.code,{children:"zopp.toml"})," in your project directory:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",children:'[defaults]\nworkspace = "acme-corp"\nproject = "api-backend"\nenvironment = "development"\n'})}),"\n",(0,s.jsx)(n.p,{children:"zopp searches for configuration files up the directory tree:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"zopp.toml"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"zopp.yaml"})," / ",(0,s.jsx)(n.code,{children:"zopp.yml"})]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"zopp.json"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"With this configuration, commands become simple:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# These are equivalent:\nzopp secret set API_KEY "secret123" -w acme-corp -p api-backend -e development\nzopp secret set API_KEY "secret123"\n\n# Override for a different environment:\nzopp secret set API_KEY "prod-secret" -e production\n'})}),"\n",(0,s.jsx)(n.h2,{id:"users-vs-principals",children:"Users vs Principals"}),"\n",(0,s.jsx)(n.p,{children:"It's important to understand the distinction:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Concept"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"User"})}),(0,s.jsx)(n.td,{children:"A person, identified by email address"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Principal"})}),(0,s.jsx)(n.td,{children:"A device/credential, identified by name"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"One user can have multiple principals (laptop, desktop, CI system). Users exist for auditing and permissions; principals exist for authentication and key management."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# A user's principals\nalice@company.com\n \u251c\u2500\u2500 alice-macbook (personal laptop)\n \u251c\u2500\u2500 alice-desktop (work machine)\n \u2514\u2500\u2500 github-actions (CI principal)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"rbac-permissions",children:"RBAC Permissions"}),"\n",(0,s.jsx)(n.p,{children:"zopp has three roles that can be assigned at workspace, project, or environment level:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Role"}),(0,s.jsx)(n.th,{children:"Can Read"}),(0,s.jsx)(n.th,{children:"Can Write"}),(0,s.jsx)(n.th,{children:"Can Admin"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"read"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"write"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"admin"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Yes"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Admin permissions include:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Creating/deleting projects and environments"}),"\n",(0,s.jsx)(n.li,{children:"Managing permissions for others"}),"\n",(0,s.jsx)(n.li,{children:"Creating workspace invites"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Permissions cascade down:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Workspace ",(0,s.jsx)(n.code,{children:"admin"})," \u2192 admin on all projects and environments"]}),"\n",(0,s.jsxs)(n.li,{children:["Project ",(0,s.jsx)(n.code,{children:"write"})," \u2192 write on all environments in that project"]}),"\n",(0,s.jsxs)(n.li,{children:["Environment ",(0,s.jsx)(n.code,{children:"read"})," \u2192 read only that specific environment"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Give a user read access to production only\nzopp permission user-env-set -w acme-corp -p api-backend -e production \\\n  --email dev@company.com --role read\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"One workspace per organization"})," - Most teams only need one workspace."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"One project per application"})," - Map projects to your services/applications."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Consistent environment names"})," - Use the same names (",(0,s.jsx)(n.code,{children:"development"}),", ",(0,s.jsx)(n.code,{children:"staging"}),", ",(0,s.jsx)(n.code,{children:"production"}),") across projects."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsxs)(n.strong,{children:["Use ",(0,s.jsx)(n.code,{children:"zopp.toml"})]})," - Configure defaults to avoid repetitive flags."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Limit production access"})," - Use environment-level permissions to restrict who can read production secrets."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Service principals for CI"})," - Create dedicated principals for CI/CD with minimal permissions."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/guides/team-collaboration",children:"Team Collaboration"})," - Invite team members"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/guides/ci-cd",children:"CI/CD Integration"})," - Set up service principals"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/reference/cli",children:"CLI Reference"})," - Full command documentation"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);