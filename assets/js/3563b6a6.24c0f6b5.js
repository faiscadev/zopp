"use strict";(globalThis.webpackChunkzopp_docs=globalThis.webpackChunkzopp_docs||[]).push([[9643],{1969(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>p});const s=JSON.parse('{"id":"guides/import-export","title":"Import & Export","description":"Work with .env files and migrate secrets between environments.","source":"@site/docs/guides/import-export.md","sourceDirName":"guides","slug":"/guides/import-export","permalink":"/zopp/guides/import-export","draft":false,"unlisted":false,"editUrl":"https://github.com/faiscadev/zopp/tree/main/docs/docs/guides/import-export.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"Import & Export","description":"Work with .env files and migrate secrets between environments."},"sidebar":"docs","previous":{"title":"CI/CD Integration","permalink":"/zopp/guides/ci-cd"},"next":{"title":"Overview","permalink":"/zopp/reference/cli/"}}');var t=r(4848),o=r(8453);const i={sidebar_position:6,title:"Import & Export",description:"Work with .env files and migrate secrets between environments."},l="Import & Export",c={},p=[{value:"Exporting Secrets",id:"exporting-secrets",level:2},{value:"Export Options",id:"export-options",level:3},{value:"Importing Secrets",id:"importing-secrets",level:2},{value:"Supported Formats",id:"supported-formats",level:3},{value:"Import Behavior",id:"import-behavior",level:3},{value:"Common Workflows",id:"common-workflows",level:2},{value:"Copy Secrets Between Environments",id:"copy-secrets-between-environments",level:3},{value:"Migrate from .env Files",id:"migrate-from-env-files",level:3},{value:"Seed New Environment",id:"seed-new-environment",level:3},{value:"Sync Local Development",id:"sync-local-development",level:3},{value:"Backup Secrets",id:"backup-secrets",level:3},{value:"Using <code>zopp run</code>",id:"using-zopp-run",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Use <code>zopp run</code> When Possible",id:"1-use-zopp-run-when-possible",level:3},{value:"2. Add .env to .gitignore",id:"2-add-env-to-gitignore",level:3},{value:"3. Use Environment-Specific Files",id:"3-use-environment-specific-files",level:3},{value:"4. Clean Up After Use",id:"4-clean-up-after-use",level:3},{value:"5. Validate Before Import",id:"5-validate-before-import",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Import Fails Silently",id:"import-fails-silently",level:3},{value:"Special Characters in Values",id:"special-characters-in-values",level:3},{value:"Environment Variables Not Set",id:"environment-variables-not-set",level:3},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"import--export",children:"Import & Export"})}),"\n",(0,t.jsxs)(n.p,{children:["zopp makes it easy to work with ",(0,t.jsx)(n.code,{children:".env"})," files and migrate secrets between environments. This guide covers importing, exporting, and common workflows."]}),"\n",(0,t.jsx)(n.h2,{id:"exporting-secrets",children:"Exporting Secrets"}),"\n",(0,t.jsxs)(n.p,{children:["Export all secrets from an environment to a ",(0,t.jsx)(n.code,{children:".env"})," file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Export to file\nzopp secret export -o .env\n\n# Export to stdout\nzopp secret export\n\n# Export from specific environment\nzopp secret export -w myworkspace -p myproject -e production -o prod.env\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The output format is standard ",(0,t.jsx)(n.code,{children:".env"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# .env\nDATABASE_URL=postgresql://user:pass@localhost/db\nAPI_KEY=sk_live_abc123\nREDIS_URL=redis://localhost:6379\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"danger",children:(0,t.jsx)(n.p,{children:"Exported files contain plaintext secrets. Keep them secure and never commit them to version control."})}),"\n",(0,t.jsx)(n.h3,{id:"export-options",children:"Export Options"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Export all secrets (default)\nzopp secret export -o .env\n\n# Secrets are sorted alphabetically by key\n"})}),"\n",(0,t.jsx)(n.h2,{id:"importing-secrets",children:"Importing Secrets"}),"\n",(0,t.jsxs)(n.p,{children:["Import secrets from a ",(0,t.jsx)(n.code,{children:".env"})," file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Import from file\nzopp secret import -i .env\n\n# Import from stdin\ncat .env | zopp secret import\n\n# Import to specific environment\nzopp secret import -w myworkspace -p myproject -e production -i prod.env\n"})}),"\n",(0,t.jsx)(n.h3,{id:"supported-formats",children:"Supported Formats"}),"\n",(0,t.jsxs)(n.p,{children:["zopp supports standard ",(0,t.jsx)(n.code,{children:".env"})," format:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Comments are ignored\n# Blank lines are ignored\n\nSIMPLE_KEY=value\nQUOTED_VALUE="value with spaces"\nSINGLE_QUOTED=\'value with spaces\'\nMULTILINE="line1\\nline2"\n\n# No interpolation - ${VAR} is stored literally\nLITERAL=${OTHER_VAR}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"import-behavior",children:"Import Behavior"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Existing keys are updated"})," - If a key already exists, its value is replaced"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"New keys are created"})," - Keys that don't exist are added"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Keys not in file are preserved"})," - Import doesn't delete existing secrets"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"common-workflows",children:"Common Workflows"}),"\n",(0,t.jsx)(n.h3,{id:"copy-secrets-between-environments",children:"Copy Secrets Between Environments"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Export from staging\nzopp secret export -e staging -o staging.env\n\n# Import to production\nzopp secret import -e production -i staging.env\n"})}),"\n",(0,t.jsx)(n.h3,{id:"migrate-from-env-files",children:"Migrate from .env Files"}),"\n",(0,t.jsx)(n.p,{children:"Moving from file-based secrets to zopp:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# 1. Create the environment\nzopp environment create development -w myworkspace -p myproject\n\n# 2. Import existing .env file\nzopp secret import -w myworkspace -p myproject -e development -i .env\n\n# 3. Verify\nzopp secret list -w myworkspace -p myproject -e development\n"})}),"\n",(0,t.jsx)(n.h3,{id:"seed-new-environment",children:"Seed New Environment"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Export template from development\nzopp secret export -e development -o template.env\n\n# Edit template with production values\nvim template.env\n\n# Import to production\nzopp secret import -e production -i template.env\n"})}),"\n",(0,t.jsx)(n.h3,{id:"sync-local-development",children:"Sync Local Development"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Pull latest secrets from zopp\nzopp secret export -e development -o .env\n\n# Start your application\nnpm start  # or docker-compose up, etc.\n"})}),"\n",(0,t.jsx)(n.h3,{id:"backup-secrets",children:"Backup Secrets"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Export all environments\nzopp secret export -e development -o backup/dev.env\nzopp secret export -e staging -o backup/staging.env\nzopp secret export -e production -o backup/prod.env\n\n# Encrypt the backup\ntar -czf secrets-backup.tar.gz backup/\ngpg -c secrets-backup.tar.gz\nrm -rf backup/ secrets-backup.tar.gz\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"using-zopp-run",children:["Using ",(0,t.jsx)(n.code,{children:"zopp run"})]}),"\n",(0,t.jsx)(n.p,{children:"Instead of exporting to a file, inject secrets directly into a command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Run with secrets as environment variables\nzopp run -- npm start\n\n# Override environment\nzopp run -e production -- npm start\n\n# One-off commands\nzopp run -- printenv DATABASE_URL\n"})}),"\n",(0,t.jsx)(n.p,{children:"This is more secure than exporting because secrets never touch the filesystem."}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(n.h3,{id:"1-use-zopp-run-when-possible",children:["1. Use ",(0,t.jsx)(n.code,{children:"zopp run"})," When Possible"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Preferred: secrets never written to disk\nzopp run -- npm start\n\n# Avoid if possible: creates file with plaintext secrets\nzopp secret export -o .env && npm start\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-add-env-to-gitignore",children:"2. Add .env to .gitignore"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# .gitignore\n.env\n.env.*\n*.env\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-use-environment-specific-files",children:"3. Use Environment-Specific Files"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Good\nzopp secret export -e development -o .env.development\nzopp secret export -e production -o .env.production\n\n# Then source the right one\nsource .env.development\n"})}),"\n",(0,t.jsx)(n.h3,{id:"4-clean-up-after-use",children:"4. Clean Up After Use"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Export, use, delete\nzopp secret export -o .env\n./my-script.sh\nrm .env\n"})}),"\n",(0,t.jsx)(n.p,{children:"Or use a subshell:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"(zopp secret export -o .env && ./my-script.sh; rm -f .env)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"5-validate-before-import",children:"5. Validate Before Import"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Preview what would be imported\ncat .env | head -20\n\n# Check for sensitive values you might not want to store\ngrep -E "TOKEN|SECRET|KEY" .env\n'})}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"import-fails-silently",children:"Import Fails Silently"}),"\n",(0,t.jsx)(n.p,{children:"Make sure the file format is correct:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Check for BOM or weird characters\nfile .env\nhexdump -C .env | head\n\n# Convert from Windows line endings if needed\ndos2unix .env\n"})}),"\n",(0,t.jsx)(n.h3,{id:"special-characters-in-values",children:"Special Characters in Values"}),"\n",(0,t.jsx)(n.p,{children:"Use quotes for values with special characters:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Good\nPASSWORD="p@ss!word#123"\n\n# May cause issues\nPASSWORD=p@ss!word#123\n'})}),"\n",(0,t.jsx)(n.h3,{id:"environment-variables-not-set",children:"Environment Variables Not Set"}),"\n",(0,t.jsxs)(n.p,{children:["When using ",(0,t.jsx)(n.code,{children:"zopp run"}),", ensure secrets are actually exported:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Debug: print all environment variables\nzopp run -- env\n\n# Check specific variable\nzopp run -- printenv DATABASE_URL\n"})}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/reference/cli",children:"CLI Reference"})," - Full command reference"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/guides/core-concepts",children:"Core Concepts"})," - Understand the data model"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453(e,n,r){r.d(n,{R:()=>i,x:()=>l});var s=r(6540);const t={},o=s.createContext(t);function i(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);