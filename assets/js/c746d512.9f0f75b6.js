"use strict";(globalThis.webpackChunkzopp_docs=globalThis.webpackChunkzopp_docs||[]).push([[7971],{4356(e,s,n){n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>p,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"self-hosting/server","title":"Server Deployment","description":"Deploy the zopp server.","source":"@site/docs/self-hosting/server.md","sourceDirName":"self-hosting","slug":"/self-hosting/server","permalink":"/zopp/self-hosting/server","draft":false,"unlisted":false,"editUrl":"https://github.com/faiscadev/zopp/tree/main/docs/docs/self-hosting/server.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Server Deployment","description":"Deploy the zopp server."},"sidebar":"docs","previous":{"title":"Self-Hosting","permalink":"/zopp/self-hosting/"},"next":{"title":"Docker Compose","permalink":"/zopp/self-hosting/docker-compose"}}');var t=n(4848),o=n(8453);const i={sidebar_position:2,title:"Server Deployment",description:"Deploy the zopp server."},p="Server Deployment",l={},a=[{value:"Binary Installation",id:"binary-installation",level:2},{value:"Docker Deployment",id:"docker-deployment",level:2},{value:"Systemd Service",id:"systemd-service",level:2},{value:"Creating Invites",id:"creating-invites",level:2},{value:"Health Checks",id:"health-checks",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"server-deployment",children:"Server Deployment"})}),"\n",(0,t.jsx)(s.p,{children:"This guide covers deploying the zopp server in various environments."}),"\n",(0,t.jsx)(s.h2,{id:"binary-installation",children:"Binary Installation"}),"\n",(0,t.jsx)(s.p,{children:"Download and run the server binary:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Download\ncurl -fsSL https://github.com/faiscadev/zopp/releases/latest/download/zopp-server-linux-amd64 -o zopp-server\nchmod +x zopp-server\n\n# Run with SQLite (default)\n./zopp-server serve\n\n# Run with custom database path\n./zopp-server serve --db /var/lib/zopp/zopp.db\n\n# Run with PostgreSQL\nDATABASE_URL=postgres://user:pass@localhost/zopp ./zopp-server serve\n\n# Run with TLS\n./zopp-server serve \\\n  --tls-cert /path/to/server.crt \\\n  --tls-key /path/to/server.key\n"})}),"\n",(0,t.jsx)(s.h2,{id:"docker-deployment",children:"Docker Deployment"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# SQLite\ndocker run -d \\\n  --name zopp-server \\\n  -p 50051:50051 \\\n  -v zopp-data:/data \\\n  ghcr.io/faiscadev/zopp-server:latest\n\n# PostgreSQL\ndocker run -d \\\n  --name zopp-server \\\n  -p 50051:50051 \\\n  -e DATABASE_URL=postgres://user:pass@host:5432/zopp \\\n  ghcr.io/faiscadev/zopp-server:latest\n\n# With TLS\ndocker run -d \\\n  --name zopp-server \\\n  -p 50051:50051 \\\n  -v /path/to/certs:/certs:ro \\\n  ghcr.io/faiscadev/zopp-server:latest \\\n  serve --tls-cert /certs/server.crt --tls-key /certs/server.key\n"})}),"\n",(0,t.jsx)(s.h2,{id:"systemd-service",children:"Systemd Service"}),"\n",(0,t.jsx)(s.p,{children:"For production Linux deployments:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ini",children:"# /etc/systemd/system/zopp.service\n[Unit]\nDescription=zopp Secrets Manager\nAfter=network.target\n\n[Service]\nType=simple\nUser=zopp\nExecStart=/usr/local/bin/zopp-server serve --db /var/lib/zopp/zopp.db\nRestart=always\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo systemctl daemon-reload\nsudo systemctl enable zopp\nsudo systemctl start zopp\n"})}),"\n",(0,t.jsx)(s.h2,{id:"creating-invites",children:"Creating Invites"}),"\n",(0,t.jsx)(s.p,{children:"To bootstrap the first user:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# SQLite\n./zopp-server invite create --expires-hours 48 --db /var/lib/zopp/zopp.db\n\n# PostgreSQL\nDATABASE_URL=postgres://user:pass@localhost/zopp ./zopp-server invite create --expires-hours 48\n\n# Docker\ndocker exec zopp-server zopp-server invite create --expires-hours 48\n"})}),"\n",(0,t.jsx)(s.h2,{id:"health-checks",children:"Health Checks"}),"\n",(0,t.jsx)(s.p,{children:"The server exposes health endpoints on port 8080:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Liveness\ncurl http://localhost:8080/healthz\n\n# Readiness\ncurl http://localhost:8080/readyz\n"})}),"\n",(0,t.jsx)(s.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"/self-hosting/database",children:"Database Setup"})," - Configure SQLite or PostgreSQL"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"/self-hosting/tls",children:"TLS Configuration"})," - Secure your deployment"]}),"\n"]})]})}function d(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453(e,s,n){n.d(s,{R:()=>i,x:()=>p});var r=n(6540);const t={},o=r.createContext(t);function i(e){const s=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function p(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(o.Provider,{value:s},e.children)}}}]);