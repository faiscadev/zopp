"use strict";(globalThis.webpackChunkzopp_docs=globalThis.webpackChunkzopp_docs||[]).push([[9895],{7033(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>d,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"reference/cli/sync","title":"sync","description":"Sync secrets to external systems like Kubernetes.","source":"@site/docs/reference/cli/sync.md","sourceDirName":"reference/cli","slug":"/reference/cli/sync","permalink":"/zopp/reference/cli/sync","draft":false,"unlisted":false,"editUrl":"https://github.com/faiscadev/zopp/tree/main/docs/docs/reference/cli/sync.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"title":"sync","description":"Sync secrets to external systems like Kubernetes."},"sidebar":"docs","previous":{"title":"group","permalink":"/zopp/reference/cli/group"},"next":{"title":"diff","permalink":"/zopp/reference/cli/diff"}}');var r=s(4848),c=s(8453);const d={sidebar_position:10,title:"sync",description:"Sync secrets to external systems like Kubernetes."},i="sync",o={},l=[{value:"Commands",id:"commands",level:2},{value:"sync k8s",id:"sync-k8s",level:2},{value:"Options",id:"options",level:3},{value:"Examples",id:"examples",level:3},{value:"How It Works",id:"how-it-works",level:3},{value:"Labels Added",id:"labels-added",level:3}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"sync",children:"sync"})}),"\n",(0,r.jsx)(n.p,{children:"Sync secrets from zopp to external systems. Currently supports Kubernetes Secrets."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"zopp sync <COMMAND>\n"})}),"\n",(0,r.jsx)(n.h2,{id:"commands",children:"Commands"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Command"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"k8s"})}),(0,r.jsx)(n.td,{children:"Sync secrets to a Kubernetes Secret"})]})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"sync-k8s",children:"sync k8s"}),"\n",(0,r.jsx)(n.p,{children:"Sync secrets from a zopp environment to a Kubernetes Secret. Creates the Secret if it doesn't exist, or updates it if it does."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"zopp sync k8s [OPTIONS] --namespace <NAMESPACE> --secret <SECRET>\n"})}),"\n",(0,r.jsx)(n.h3,{id:"options",children:"Options"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Option"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--namespace <NAMESPACE>"})}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Kubernetes namespace"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--secret <SECRET>"})}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Kubernetes Secret name to create/update"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-w, --workspace <WORKSPACE>"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Workspace name (defaults from zopp.toml)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-p, --project <PROJECT>"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Project name (defaults from zopp.toml)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-e, --environment <ENVIRONMENT>"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Environment name (defaults from zopp.toml)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--kubeconfig <PATH>"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Path to kubeconfig file (default: ~/.kube/config)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--context <CONTEXT>"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Kubernetes context to use"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--force"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Force sync even if Secret exists and not managed by zopp"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"--dry-run"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Show what would be synced without applying"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"-h, --help"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"Print help"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Sync development secrets to Kubernetes\nzopp sync k8s \\\n  -w mycompany -p backend -e development \\\n  --namespace default \\\n  --secret backend-secrets\n\n# Dry run to preview changes\nzopp sync k8s \\\n  --namespace production \\\n  --secret api-secrets \\\n  --dry-run\n\n# Use specific kubeconfig and context\nzopp sync k8s \\\n  --namespace staging \\\n  --secret app-secrets \\\n  --kubeconfig ~/.kube/staging-config \\\n  --context staging-cluster\n\n# Force overwrite existing Secret\nzopp sync k8s \\\n  --namespace default \\\n  --secret legacy-secrets \\\n  --force\n"})}),"\n",(0,r.jsx)(n.h3,{id:"how-it-works",children:"How It Works"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Fetches all secrets from the specified zopp environment"}),"\n",(0,r.jsx)(n.li,{children:"Decrypts them client-side"}),"\n",(0,r.jsx)(n.li,{children:"Creates or updates a Kubernetes Secret with the decrypted values"}),"\n",(0,r.jsx)(n.li,{children:"Adds labels to track that the Secret is managed by zopp"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"labels-added",children:"Labels Added"}),"\n",(0,r.jsx)(n.p,{children:"The synced Kubernetes Secret will have these labels:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"metadata:\n  labels:\n    app.kubernetes.io/managed-by: zopp\n    zopp.dev/workspace: mycompany\n    zopp.dev/project: backend\n    zopp.dev/environment: development\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["For continuous synchronization, consider using the ",(0,r.jsx)(n.a,{href:"/guides/kubernetes-operator",children:"zopp Kubernetes Operator"})," which watches for changes and keeps secrets in sync automatically."]})})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453(e,n,s){s.d(n,{R:()=>d,x:()=>i});var t=s(6540);const r={},c=t.createContext(r);function d(e){const n=t.useContext(c);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);