"use strict";(globalThis.webpackChunkzopp_docs=globalThis.webpackChunkzopp_docs||[]).push([[3962],{2074(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"installation/docker","title":"Docker Installation","description":"Run zopp server and CLI using Docker.","source":"@site/docs/installation/docker.md","sourceDirName":"installation","slug":"/installation/docker","permalink":"/zopp/installation/docker","draft":false,"unlisted":false,"editUrl":"https://github.com/faiscadev/zopp/tree/main/docs/docs/installation/docker.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Docker Installation","description":"Run zopp server and CLI using Docker."},"sidebar":"docs","previous":{"title":"CLI Installation","permalink":"/zopp/installation/cli"},"next":{"title":"Kubernetes Installation","permalink":"/zopp/installation/kubernetes"}}');var t=s(4848),i=s(8453);const o={sidebar_position:3,title:"Docker Installation",description:"Run zopp server and CLI using Docker."},a="Docker Installation",l={},c=[{value:"Images",id:"images",level:2},{value:"Running the Server",id:"running-the-server",level:2},{value:"Quick Start (SQLite)",id:"quick-start-sqlite",level:3},{value:"With PostgreSQL",id:"with-postgresql",level:3},{value:"With TLS",id:"with-tls",level:3},{value:"Docker Compose",id:"docker-compose",level:2},{value:"Using the CLI via Docker",id:"using-the-cli-via-docker",level:2},{value:"Connecting to Host Network",id:"connecting-to-host-network",level:3},{value:"Creating Server Invites",id:"creating-server-invites",level:2},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Health Checks",id:"health-checks",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"docker-installation",children:"Docker Installation"})}),"\n",(0,t.jsx)(n.p,{children:"Docker provides an easy way to run the zopp server without installing dependencies. All zopp images are available on GitHub Container Registry."}),"\n",(0,t.jsx)(n.h2,{id:"images",children:"Images"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Image"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ghcr.io/faiscadev/zopp-server"})}),(0,t.jsx)(n.td,{children:"The zopp gRPC server"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ghcr.io/faiscadev/zopp-operator"})}),(0,t.jsx)(n.td,{children:"Kubernetes operator for syncing secrets"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ghcr.io/faiscadev/zopp-cli"})}),(0,t.jsx)(n.td,{children:"The zopp CLI"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["All images support ",(0,t.jsx)(n.code,{children:"linux/amd64"})," and ",(0,t.jsx)(n.code,{children:"linux/arm64"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"running-the-server",children:"Running the Server"}),"\n",(0,t.jsx)(n.h3,{id:"quick-start-sqlite",children:"Quick Start (SQLite)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run -d \\\n  --name zopp-server \\\n  -p 50051:50051 \\\n  -v zopp-data:/data \\\n  ghcr.io/faiscadev/zopp-server:latest\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This starts the server with SQLite storage at ",(0,t.jsx)(n.code,{children:"/data/zopp.db"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"with-postgresql",children:"With PostgreSQL"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run -d \\\n  --name zopp-server \\\n  -p 50051:50051 \\\n  -e DATABASE_URL=postgres://user:password@host:5432/zopp \\\n  ghcr.io/faiscadev/zopp-server:latest\n"})}),"\n",(0,t.jsx)(n.h3,{id:"with-tls",children:"With TLS"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run -d \\\n  --name zopp-server \\\n  -p 50051:50051 \\\n  -v /path/to/certs:/certs:ro \\\n  -v zopp-data:/data \\\n  ghcr.io/faiscadev/zopp-server:latest \\\n  serve --tls-cert /certs/server.crt --tls-key /certs/server.key\n"})}),"\n",(0,t.jsx)(n.h2,{id:"docker-compose",children:"Docker Compose"}),"\n",(0,t.jsx)(n.p,{children:"A complete setup with PostgreSQL:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'# docker-compose.yaml\nversion: \'3.8\'\n\nservices:\n  postgres:\n    image: postgres:16\n    environment:\n      POSTGRES_USER: zopp\n      POSTGRES_PASSWORD: zopp\n      POSTGRES_DB: zopp\n    volumes:\n      - postgres-data:/var/lib/postgresql/data\n    healthcheck:\n      test: ["CMD-SHELL", "pg_isready -U zopp"]\n      interval: 5s\n      timeout: 5s\n      retries: 5\n\n  zopp-server:\n    image: ghcr.io/faiscadev/zopp-server:latest\n    ports:\n      - "50051:50051"\n    environment:\n      DATABASE_URL: postgres://zopp:zopp@postgres:5432/zopp\n    depends_on:\n      postgres:\n        condition: service_healthy\n\nvolumes:\n  postgres-data:\n'})}),"\n",(0,t.jsx)(n.p,{children:"Start with:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker compose up -d\n"})}),"\n",(0,t.jsx)(n.h2,{id:"using-the-cli-via-docker",children:"Using the CLI via Docker"}),"\n",(0,t.jsx)(n.p,{children:"If you don't want to install the CLI locally, you can use the Docker image:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Create an alias for convenience\nalias zopp='docker run --rm -v ~/.zopp:/home/zopp/.zopp ghcr.io/faiscadev/zopp-cli:latest'\n\n# Now use normally\nzopp workspace list\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"-v ~/.zopp:/home/zopp/.zopp"})," mount ensures your credentials persist between runs."]})}),"\n",(0,t.jsx)(n.h3,{id:"connecting-to-host-network",children:"Connecting to Host Network"}),"\n",(0,t.jsx)(n.p,{children:"To connect the CLI to a server running on your host machine:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Linux\ndocker run --rm \\\n  --network host \\\n  -v ~/.zopp:/home/zopp/.zopp \\\n  ghcr.io/faiscadev/zopp-cli:latest \\\n  --server http://127.0.0.1:50051 \\\n  workspace list\n\n# macOS/Windows\ndocker run --rm \\\n  -v ~/.zopp:/home/zopp/.zopp \\\n  ghcr.io/faiscadev/zopp-cli:latest \\\n  --server http://host.docker.internal:50051 \\\n  workspace list\n"})}),"\n",(0,t.jsx)(n.h2,{id:"creating-server-invites",children:"Creating Server Invites"}),"\n",(0,t.jsx)(n.p,{children:"To create the first user invite, you need to run the server command with database access:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# SQLite\ndocker run --rm \\\n  -v zopp-data:/data \\\n  ghcr.io/faiscadev/zopp-server:latest \\\n  invite create --expires-hours 48 --db /data/zopp.db\n\n# PostgreSQL\ndocker run --rm \\\n  -e DATABASE_URL=postgres://zopp:zopp@host.docker.internal:5432/zopp \\\n  ghcr.io/faiscadev/zopp-server:latest \\\n  invite create --expires-hours 48\n"})}),"\n",(0,t.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Variable"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Default"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"DATABASE_URL"})}),(0,t.jsx)(n.td,{children:"Database connection string"}),(0,t.jsxs)(n.td,{children:["SQLite at ",(0,t.jsx)(n.code,{children:"/data/zopp.db"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ZOPP_TLS_CERT"})}),(0,t.jsx)(n.td,{children:"Path to TLS certificate"}),(0,t.jsx)(n.td,{children:"None"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ZOPP_TLS_KEY"})}),(0,t.jsx)(n.td,{children:"Path to TLS private key"}),(0,t.jsx)(n.td,{children:"None"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ZOPP_TLS_CLIENT_CA"})}),(0,t.jsx)(n.td,{children:"Path to client CA for mTLS"}),(0,t.jsx)(n.td,{children:"None"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"health-checks",children:"Health Checks"}),"\n",(0,t.jsx)(n.p,{children:"The server exposes health endpoints on port 8080:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Liveness\ncurl http://localhost:8080/healthz\n\n# Readiness\ncurl http://localhost:8080/readyz\n"})}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/installation/kubernetes",children:"Kubernetes Installation"})," - Deploy to Kubernetes with Helm"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/self-hosting",children:"Self-Hosting Guide"})," - Complete deployment guide"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/self-hosting/tls",children:"TLS Configuration"})," - Secure your deployment"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>o,x:()=>a});var r=s(6540);const t={},i=r.createContext(t);function o(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);